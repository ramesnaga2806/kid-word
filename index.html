<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kids Spelling Full</title>
<style>
body { font-family: Comic Sans MS, Arial; background: linear-gradient(135deg,#fbc2eb,#a6c1ee); text-align:center; }
h1 { margin-top:20px; }
#parent{background:white;margin:20px;padding:20px;border-radius:20px;}
input[type=text],input[type=file]{font-size:20px;padding:10px;width:220px;margin:5px;}
button{font-size:18px;padding:10px 20px;border-radius:15px;border:none;background:#ff9a9e;margin:8px;}
#img{width:220px;height:220px;background:white;border-radius:20px;object-fit:cover;margin-top:20px;}
.word{font-size:70px;letter-spacing:15px;background:white;padding:20px;border-radius:25px;display:inline-block;margin:20px;}
</style>
</head>
<body>

<h1>üåà Kids Spelling Full üåà</h1>

<div id="parent">
<h2>Parent Area</h2>
<!-- Manual entry -->
<input type="text" id="wordInput" placeholder="APPLE"><br>
<input type="file" id="imgUpload" accept="image/*"><br>
<button onclick="addWord()">Add Word</button><br>

<!-- Upload file -->
<input type="file" id="fileUpload" accept=".txt,.csv"><br>
<button onclick="uploadFile()">Upload Words</button><br>

<button onclick="clearAll()">Clear All</button>
</div>

<img id="img">
<div class="word" id="wordBox"></div>
<br>
<button onclick="nextWord()">Next ‚û°Ô∏è</button>

<script>
let words = JSON.parse(localStorage.getItem("kidsWords")) || [];
let index=0;

// ADD single word manually
function addWord(){
    let w = document.getElementById("wordInput").value.trim().toUpperCase();
    if(!w) return alert("Enter a word");
    let imgFile = document.getElementById("imgUpload").files[0];

    if(imgFile){
        let reader = new FileReader();
        reader.onload = function(e){
            words.push({word:w,img:e.target.result});
            saveAndReset();
        }
        reader.readAsDataURL(imgFile);
    } else {
        let autoImg = "https://source.unsplash.com/400x400/?"+encodeURIComponent(w)+"&sig="+Date.now();
        words.push({word:w,img:autoImg});
        saveAndReset();
    }
}

// UPLOAD file (txt/csv)
function uploadFile(){
    let file = document.getElementById("fileUpload").files[0];
    if(!file) return alert("Select a file");
    let reader = new FileReader();
    reader.onload = function(e){
        let content = e.target.result;
        let lines = content.split(/\r?\n/);
        lines.forEach(line=>{
            let w=line.trim().toUpperCase();
            if(w) words.push({word:w,img:"https://source.unsplash.com/400x400/?"+encodeURIComponent(w)+"&sig="+Date.now()});
        });
        saveAndReset();
        alert("Words uploaded!");
    }
    reader.readAsText(file);
}

// SAVE & RESET INPUTS
function saveAndReset(){
    localStorage.setItem("kidsWords",JSON.stringify(words));
    document.getElementById("wordInput").value="";
    document.getElementById("imgUpload").value="";
    document.getElementById("fileUpload").value="";
    showWord();
}

// CLEAR
function clearAll(){
    if(confirm("Clear all words?")){
        words=[]; localStorage.removeItem("kidsWords"); index=0; showWord();
    }
}

// SHOW WORD + IMAGE
function showWord(){
    if(words.length===0){document.getElementById("wordBox").innerHTML="No Words"; document.getElementById("img").src=""; return;}
    let w = words[index];
    document.getElementById("img").src=w.img;
    document.getElementById("wordBox").innerHTML="";
    speakLetters(w.word);
}

// SPEAK LETTERS + FULL WORD
function speakLetters(word){
    let letters = word.split(""); let i=0;
    function speakNext(){
        if(i<letters.length){
            document.getElementById("wordBox").innerHTML+=letters[i]+" ";
            speak(letters[i],0.6); i++;
            setTimeout(speakNext,900);
        } else setTimeout(()=>speak(word,0.7),800);
    }
    speakNext();
}

// VOICE
function speak(text,rate){
    let msg=new SpeechSynthesisUtterance(text);
    msg.rate=rate; msg.pitch=1.3;
    speechSynthesis.speak(msg);
}

// NEXT WORD
function nextWord(){index=(index+1)%words.length; showWord();}
showWord();
</script>

</body>
</html>
